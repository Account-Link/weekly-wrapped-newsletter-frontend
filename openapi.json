{
  "openapi": "3.1.0",
  "info": { "title": "TikTok Wrapped Backend", "version": "0.1.0" },
  "paths": {
    "/weekly-report/{app_user_id}": {
      "get": {
        "tags": ["weekly-report"],
        "summary": "Get Weekly Report",
        "operationId": "get_weekly_report_weekly_report__app_user_id__get",
        "parameters": [
          {
            "name": "app_user_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "App User Id" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WeeklyReportResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/weekly-report/unsubscribe": {
      "post": {
        "tags": ["weekly-report"],
        "summary": "Unsubscribe Weekly Report",
        "operationId": "unsubscribe_weekly_report_weekly_report_unsubscribe_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UnsubscribeRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/UnsubscribeResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/upload": {
      "post": {
        "tags": ["upload"],
        "summary": "Upload Image",
        "description": "Upload an image file to S3.",
        "operationId": "upload_image_upload_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_image_upload_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/UploadResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/test/run": {
      "post": {
        "summary": "Admin Test Run",
        "operationId": "admin_test_run_admin_test_run_post",
        "parameters": [
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/AdminTestRunRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminTestRunResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Not Found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/test/runs/{wrapped_run_id}": {
      "get": {
        "summary": "Admin Test Run Status",
        "operationId": "admin_test_run_status_admin_test_runs__wrapped_run_id__get",
        "parameters": [
          {
            "name": "wrapped_run_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Wrapped Run Id" }
          },
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminTestRunStatusResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Not Found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/test/runs/{wrapped_run_id}/retry-analysis": {
      "post": {
        "summary": "Admin Test Retry Analysis",
        "operationId": "admin_test_retry_analysis_admin_test_runs__wrapped_run_id__retry_analysis_post",
        "parameters": [
          {
            "name": "wrapped_run_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Wrapped Run Id" }
          },
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminTestEnqueueResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Not Found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/test/runs/{wrapped_run_id}/retry-email": {
      "post": {
        "summary": "Admin Test Retry Email",
        "operationId": "admin_test_retry_email_admin_test_runs__wrapped_run_id__retry_email_post",
        "parameters": [
          {
            "name": "wrapped_run_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Wrapped Run Id" }
          },
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminTestEnqueueResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Not Found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/test/runs/{wrapped_run_id}/retry-watch-history": {
      "post": {
        "summary": "Admin Test Retry Watch History",
        "operationId": "admin_test_retry_watch_history_admin_test_runs__wrapped_run_id__retry_watch_history_post",
        "parameters": [
          {
            "name": "wrapped_run_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Wrapped Run Id" }
          },
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminTestEnqueueResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Not Found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/users/{app_user_id}/verify-region": {
      "post": {
        "summary": "Admin Verify Region",
        "operationId": "admin_verify_region_admin_users__app_user_id__verify_region_post",
        "parameters": [
          {
            "name": "app_user_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "App User Id" }
          },
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminVerifyRegionEnqueueResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Not Found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/users/verify-region/batch": {
      "post": {
        "summary": "Admin Verify Region Batch",
        "operationId": "admin_verify_region_batch_admin_users_verify_region_batch_post",
        "parameters": [
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminVerifyRegionBatchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminVerifyRegionBatchResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/users/verify-region/batch/{batch_id}": {
      "get": {
        "summary": "Admin Verify Region Batch Status",
        "operationId": "admin_verify_region_batch_status_admin_users_verify_region_batch__batch_id__get",
        "parameters": [
          {
            "name": "batch_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Batch Id" }
          },
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminVerifyRegionBatchStatusResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Not Found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/users/{app_user_id}/stage": {
      "get": {
        "summary": "Admin User Stage",
        "operationId": "admin_user_stage_admin_users__app_user_id__stage_get",
        "parameters": [
          {
            "name": "app_user_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "App User Id" }
          },
          {
            "name": "wrapped_run_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "Wrapped Run Id"
            }
          },
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminUserStageResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Not Found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/users/{app_user_id}/restart": {
      "post": {
        "summary": "Admin User Restart",
        "operationId": "admin_user_restart_admin_users__app_user_id__restart_post",
        "parameters": [
          {
            "name": "app_user_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "App User Id" }
          },
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminUserRestartRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminUserRestartResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Not Found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/users/stage/batch": {
      "post": {
        "summary": "Admin User Stage Batch",
        "operationId": "admin_user_stage_batch_admin_users_stage_batch_post",
        "parameters": [
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminUserStageBatchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminUserStageBatchResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/users/restart/batch": {
      "post": {
        "summary": "Admin User Restart Batch",
        "operationId": "admin_user_restart_batch_admin_users_restart_batch_post",
        "parameters": [
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminUserRestartBatchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminUserRestartBatchResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/users/{app_user_id}": {
      "delete": {
        "summary": "Admin Delete User",
        "description": "Hard-delete an app user and related rows.\n\nRequires `?confirm=true` to reduce accidental deletions.",
        "operationId": "admin_delete_user_admin_users__app_user_id__delete",
        "parameters": [
          {
            "name": "app_user_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "App User Id" }
          },
          {
            "name": "confirm",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Confirm"
            }
          },
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Admin Delete User Admin Users  App User Id  Delete"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Not Found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/test/prompt": {
      "post": {
        "summary": "Admin Test Prompt",
        "operationId": "admin_test_prompt_admin_test_prompt_post",
        "parameters": [
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminPromptPipelineRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminPromptPipelineResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unprocessable Entity"
          }
        }
      }
    },
    "/admin/wrapped/runs/{wrapped_run_id}/retry": {
      "post": {
        "summary": "Admin Wrapped Retry Run",
        "operationId": "admin_wrapped_retry_run_admin_wrapped_runs__wrapped_run_id__retry_post",
        "parameters": [
          {
            "name": "wrapped_run_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Wrapped Run Id" }
          },
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminWrappedRetryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminTestEnqueueResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Not Found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/wrapped/runs/retry-failed": {
      "post": {
        "summary": "Admin Retry Failed Runs",
        "description": "Find failed wrapped runs and enqueue retries (watch history / analysis / email) as appropriate.",
        "operationId": "admin_retry_failed_runs_admin_wrapped_runs_retry_failed_post",
        "parameters": [
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminRetryFailedRunsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminRetryFailedRunsResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/admin/wrapped/runs/retry-zero-videos": {
      "post": {
        "summary": "Admin Retry Zero Video Runs",
        "operationId": "admin_retry_zero_video_runs_admin_wrapped_runs_retry_zero_videos_post",
        "parameters": [
          {
            "name": "X-Admin-Key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Admin-Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminRetryZeroVideosRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminRetryZeroVideosResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/link/tiktok/start": {
      "post": {
        "summary": "Link Tiktok Start",
        "operationId": "link_tiktok_start_link_tiktok_start_post",
        "parameters": [
          {
            "name": "X-Device-Id",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Device-Id" }
          },
          {
            "name": "X-Platform",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Platform" }
          },
          {
            "name": "X-App-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-App-Version" }
          },
          {
            "name": "X-OS-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Os-Version" }
          }
        ],
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/LinkStartResponse" }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/link/tiktok/redirect": {
      "get": {
        "summary": "Link Tiktok Redirect",
        "operationId": "link_tiktok_redirect_link_tiktok_redirect_get",
        "parameters": [
          {
            "name": "job_id",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "title": "Job Id" }
          },
          {
            "name": "time_zone",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "Time Zone"
            }
          },
          {
            "name": "X-Device-Id",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Device-Id" }
          },
          {
            "name": "X-Platform",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Platform" }
          },
          {
            "name": "X-App-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-App-Version" }
          },
          {
            "name": "X-OS-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Os-Version" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/RedirectResponse" }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/link/tiktok/redirect/click": {
      "post": {
        "summary": "Link Tiktok Redirect Click",
        "operationId": "link_tiktok_redirect_click_link_tiktok_redirect_click_post",
        "parameters": [
          {
            "name": "X-Device-Id",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Device-Id" }
          },
          {
            "name": "X-Platform",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Platform" }
          },
          {
            "name": "X-App-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-App-Version" }
          },
          {
            "name": "X-OS-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Os-Version" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RedirectClickRequest" }
            }
          }
        },
        "responses": {
          "204": { "description": "Successful Response" },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/link/tiktok/queue-status": {
      "get": {
        "summary": "Link Tiktok Queue Status",
        "operationId": "link_tiktok_queue_status_link_tiktok_queue_status_get",
        "parameters": [
          {
            "name": "X-Device-Id",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Device-Id" }
          },
          {
            "name": "X-Platform",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Platform" }
          },
          {
            "name": "X-App-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-App-Version" }
          },
          {
            "name": "X-OS-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Os-Version" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Link Tiktok Queue Status Link Tiktok Queue Status Get"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/link/tiktok/cancel-queue": {
      "delete": {
        "summary": "Link Tiktok Cancel Queue",
        "operationId": "link_tiktok_cancel_queue_link_tiktok_cancel_queue_delete",
        "parameters": [
          {
            "name": "archive_job_id",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "title": "Archive Job Id" }
          },
          {
            "name": "X-Device-Id",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Device-Id" }
          },
          {
            "name": "X-Platform",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Platform" }
          },
          {
            "name": "X-App-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-App-Version" }
          },
          {
            "name": "X-OS-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Os-Version" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/link/tiktok/code": {
      "get": {
        "summary": "Link Tiktok Code",
        "operationId": "link_tiktok_code_link_tiktok_code_get",
        "parameters": [
          {
            "name": "job_id",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "title": "Job Id" }
          },
          {
            "name": "X-Device-Id",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Device-Id" }
          },
          {
            "name": "X-Platform",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Platform" }
          },
          {
            "name": "X-App-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-App-Version" }
          },
          {
            "name": "X-OS-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Os-Version" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CodeResponse" }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/link/tiktok/finalize": {
      "post": {
        "summary": "Link Tiktok Finalize",
        "operationId": "link_tiktok_finalize_link_tiktok_finalize_post",
        "parameters": [
          {
            "name": "X-Device-Id",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Device-Id" }
          },
          {
            "name": "X-Platform",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Platform" }
          },
          {
            "name": "X-App-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-App-Version" }
          },
          {
            "name": "X-OS-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Os-Version" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/FinalizeRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/FinalizeResponse" }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/link/tiktok/verify-region": {
      "post": {
        "summary": "Link Tiktok Verify Region",
        "operationId": "link_tiktok_verify_region_link_tiktok_verify_region_post",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "Authorization" }
          },
          {
            "name": "X-Device-Id",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Device-Id" }
          },
          {
            "name": "X-Platform",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Platform" }
          },
          {
            "name": "X-App-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-App-Version" }
          },
          {
            "name": "X-OS-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Os-Version" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VerifyRegionResponse"
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/register-email": {
      "post": {
        "summary": "Register Email",
        "operationId": "register_email_register_email_post",
        "parameters": [
          {
            "name": "X-Device-Id",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Device-Id" }
          },
          {
            "name": "X-Platform",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Platform" }
          },
          {
            "name": "X-App-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-App-Version" }
          },
          {
            "name": "X-OS-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Os-Version" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RegisterEmailRequest" }
            }
          }
        },
        "responses": {
          "204": { "description": "Successful Response" },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/referral": {
      "post": {
        "summary": "Create Or Get Referral",
        "operationId": "create_or_get_referral_referral_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ReferralRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ReferralResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/referral/impression": {
      "post": {
        "summary": "Record Referral Impression",
        "operationId": "record_referral_impression_referral_impression_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReferralImpressionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": { "description": "Successful Response" },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/wrapped/{app_user_id}": {
      "get": {
        "summary": "Wrapped Status",
        "operationId": "wrapped_status_wrapped__app_user_id__get",
        "parameters": [
          {
            "name": "app_user_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "App User Id" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WrappedStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/waitlist": {
      "post": {
        "summary": "Join Waitlist",
        "operationId": "join_waitlist_waitlist_post",
        "parameters": [
          {
            "name": "X-Device-Id",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Device-Id" }
          },
          {
            "name": "X-Platform",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Platform" }
          },
          {
            "name": "X-App-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-App-Version" }
          },
          {
            "name": "X-OS-Version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "title": "X-Os-Version" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/WaitlistRequest" }
            }
          }
        },
        "responses": {
          "204": { "description": "Successful Response" },
          "401": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            },
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/healthz": {
      "get": {
        "summary": "Healthz",
        "operationId": "healthz_healthz_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/readyz": {
      "get": {
        "summary": "Readyz",
        "operationId": "readyz_readyz_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AccessoryItem": {
        "properties": {
          "internal_name": { "type": "string", "title": "Internal Name" },
          "reason": { "type": "string", "title": "Reason" }
        },
        "type": "object",
        "required": ["internal_name", "reason"],
        "title": "AccessoryItem"
      },
      "AccessorySet": {
        "properties": {
          "head": { "$ref": "#/components/schemas/AccessoryItem" },
          "body": { "$ref": "#/components/schemas/AccessoryItem" },
          "other": { "$ref": "#/components/schemas/AccessoryItem" }
        },
        "type": "object",
        "required": ["head", "body", "other"],
        "title": "AccessorySet"
      },
      "AdminPromptCallResult": {
        "properties": {
          "prompt_key": {
            "type": "string",
            "enum": [
              "personality",
              "personality_explanation",
              "niche_journey",
              "top_niches",
              "brainrot_score",
              "brainrot_explanation",
              "keyword_2026",
              "thumb_roast"
            ],
            "title": "Prompt Key"
          },
          "prompt_used": { "type": "string", "title": "Prompt Used" },
          "output_text": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Output Text"
          },
          "parsed": { "anyOf": [{}, { "type": "null" }], "title": "Parsed" },
          "error": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Error"
          }
        },
        "type": "object",
        "required": ["prompt_key", "prompt_used"],
        "title": "AdminPromptCallResult"
      },
      "AdminPromptPipelineRequest": {
        "properties": {
          "sec_user_id": { "type": "string", "title": "Sec User Id" },
          "time_zone": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Time Zone"
          },
          "prompt_overrides": {
            "additionalProperties": { "type": "string" },
            "propertyNames": {
              "enum": [
                "personality",
                "personality_explanation",
                "niche_journey",
                "top_niches",
                "brainrot_score",
                "brainrot_explanation",
                "keyword_2026",
                "thumb_roast"
              ]
            },
            "type": "object",
            "title": "Prompt Overrides"
          },
          "model": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Model"
          },
          "temperature": {
            "type": "number",
            "title": "Temperature",
            "default": 0.7
          },
          "dry_run": { "type": "boolean", "title": "Dry Run", "default": false }
        },
        "type": "object",
        "required": ["sec_user_id"],
        "title": "AdminPromptPipelineRequest"
      },
      "AdminPromptPipelineResponse": {
        "properties": {
          "sec_user_id": { "type": "string", "title": "Sec User Id" },
          "model": { "type": "string", "title": "Model" },
          "range": { "type": "object", "title": "Range" },
          "sample_texts_used": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Sample Texts Used"
          },
          "results": {
            "items": { "$ref": "#/components/schemas/AdminPromptCallResult" },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": [
          "sec_user_id",
          "model",
          "range",
          "sample_texts_used",
          "results"
        ],
        "title": "AdminPromptPipelineResponse"
      },
      "AdminRetryFailedRunsItem": {
        "properties": {
          "wrapped_run_id": { "type": "string", "title": "Wrapped Run Id" },
          "app_user_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "App User Id"
          },
          "sec_user_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Sec User Id"
          },
          "action": { "type": "string", "title": "Action" },
          "enqueued_task": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Enqueued Task"
          },
          "job_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Job Id"
          },
          "idempotency_key": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Idempotency Key"
          },
          "skipped_reason": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Skipped Reason"
          }
        },
        "type": "object",
        "required": ["wrapped_run_id", "action"],
        "title": "AdminRetryFailedRunsItem"
      },
      "AdminRetryFailedRunsRequest": {
        "properties": {
          "limit": { "type": "integer", "title": "Limit", "default": 50 },
          "dry_run": {
            "type": "boolean",
            "title": "Dry Run",
            "default": false
          },
          "reset_payload": {
            "type": "boolean",
            "title": "Reset Payload",
            "default": true
          },
          "include_watch_history": {
            "anyOf": [{ "type": "boolean" }, { "type": "null" }],
            "title": "Include Watch History"
          },
          "include_analysis": {
            "anyOf": [{ "type": "boolean" }, { "type": "null" }],
            "title": "Include Analysis"
          },
          "include_email": {
            "anyOf": [{ "type": "boolean" }, { "type": "null" }],
            "title": "Include Email"
          }
        },
        "type": "object",
        "title": "AdminRetryFailedRunsRequest",
        "description": "Admin-only: bulk retry failed wrapped runs."
      },
      "AdminRetryFailedRunsResponse": {
        "properties": {
          "matched": { "type": "integer", "title": "Matched" },
          "processed": { "type": "integer", "title": "Processed" },
          "enqueued": { "type": "integer", "title": "Enqueued" },
          "dry_run": { "type": "boolean", "title": "Dry Run" },
          "results": {
            "items": {
              "$ref": "#/components/schemas/AdminRetryFailedRunsItem"
            },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": ["matched", "processed", "enqueued", "dry_run", "results"],
        "title": "AdminRetryFailedRunsResponse"
      },
      "AdminRetryZeroVideosItem": {
        "properties": {
          "wrapped_run_id": { "type": "string", "title": "Wrapped Run Id" },
          "app_user_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "App User Id"
          },
          "sec_user_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Sec User Id"
          },
          "total_videos": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Total Videos"
          },
          "watch_history_progress": {
            "anyOf": [{ "type": "object" }, { "type": "null" }],
            "title": "Watch History Progress"
          },
          "action": { "type": "string", "title": "Action" },
          "enqueued_task": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Enqueued Task"
          },
          "job_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Job Id"
          },
          "idempotency_key": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Idempotency Key"
          },
          "skipped_reason": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Skipped Reason"
          }
        },
        "type": "object",
        "required": ["wrapped_run_id", "action"],
        "title": "AdminRetryZeroVideosItem"
      },
      "AdminRetryZeroVideosRequest": {
        "properties": {
          "limit": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Limit",
            "default": 50
          },
          "dry_run": {
            "type": "boolean",
            "title": "Dry Run",
            "default": false
          },
          "reset_payload": {
            "type": "boolean",
            "title": "Reset Payload",
            "default": true
          },
          "include_admin_test": {
            "type": "boolean",
            "title": "Include Admin Test",
            "default": false
          },
          "run_status": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "enum": ["pending", "ready", "failed"]
                },
                "type": "array"
              },
              { "type": "null" }
            ],
            "title": "Run Status"
          }
        },
        "type": "object",
        "title": "AdminRetryZeroVideosRequest"
      },
      "AdminRetryZeroVideosResponse": {
        "properties": {
          "matched": { "type": "integer", "title": "Matched" },
          "processed": { "type": "integer", "title": "Processed" },
          "enqueued": { "type": "integer", "title": "Enqueued" },
          "dry_run": { "type": "boolean", "title": "Dry Run" },
          "results": {
            "items": {
              "$ref": "#/components/schemas/AdminRetryZeroVideosItem"
            },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": ["matched", "processed", "enqueued", "dry_run", "results"],
        "title": "AdminRetryZeroVideosResponse"
      },
      "AdminTestEnqueueResponse": {
        "properties": {
          "wrapped_run_id": { "type": "string", "title": "Wrapped Run Id" },
          "task_name": { "type": "string", "title": "Task Name" },
          "job_id": { "type": "string", "title": "Job Id" },
          "status": { "type": "string", "title": "Status" },
          "idempotency_key": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Idempotency Key"
          }
        },
        "type": "object",
        "required": ["wrapped_run_id", "task_name", "job_id", "status"],
        "title": "AdminTestEnqueueResponse"
      },
      "AdminTestRunRequest": {
        "properties": {
          "sec_user_id": { "type": "string", "title": "Sec User Id" },
          "email": { "type": "string", "format": "email", "title": "Email" },
          "platform_username": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Platform Username"
          },
          "time_zone": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Time Zone",
            "default": "UTC"
          },
          "app_user_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "App User Id"
          },
          "force_new_run": {
            "type": "boolean",
            "title": "Force New Run",
            "default": true
          },
          "scrape_max_videos": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Scrape Max Videos"
          }
        },
        "type": "object",
        "required": ["sec_user_id", "email"],
        "title": "AdminTestRunRequest"
      },
      "AdminTestRunResponse": {
        "properties": {
          "app_user_id": { "type": "string", "title": "App User Id" },
          "wrapped_run_id": { "type": "string", "title": "Wrapped Run Id" },
          "watch_history_job_id": {
            "type": "string",
            "title": "Watch History Job Id"
          },
          "wrapped_link": { "type": "string", "title": "Wrapped Link" },
          "wrapped_status_endpoint": {
            "type": "string",
            "title": "Wrapped Status Endpoint"
          },
          "admin_status_endpoint": {
            "type": "string",
            "title": "Admin Status Endpoint"
          }
        },
        "type": "object",
        "required": [
          "app_user_id",
          "wrapped_run_id",
          "watch_history_job_id",
          "wrapped_link",
          "wrapped_status_endpoint",
          "admin_status_endpoint"
        ],
        "title": "AdminTestRunResponse"
      },
      "AdminTestRunStatusResponse": {
        "properties": {
          "wrapped_run_id": { "type": "string", "title": "Wrapped Run Id" },
          "app_user_id": { "type": "string", "title": "App User Id" },
          "sec_user_id": { "type": "string", "title": "Sec User Id" },
          "run_status": { "type": "string", "title": "Run Status" },
          "watch_history_job_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Watch History Job Id"
          },
          "platform_username": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Platform Username"
          },
          "email": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Email"
          },
          "wrapped_link": { "type": "string", "title": "Wrapped Link" },
          "wrapped_status_endpoint": {
            "type": "string",
            "title": "Wrapped Status Endpoint"
          },
          "data_jobs": {
            "type": "object",
            "title": "Data Jobs",
            "default": {}
          },
          "watch_history_progress": {
            "anyOf": [{ "type": "object" }, { "type": "null" }],
            "title": "Watch History Progress"
          },
          "analysis_warnings": {
            "anyOf": [
              { "items": { "type": "string" }, "type": "array" },
              { "type": "null" }
            ],
            "title": "Analysis Warnings"
          },
          "analysis_debug": {
            "anyOf": [{ "type": "object" }, { "type": "null" }],
            "title": "Analysis Debug"
          },
          "jobs": { "type": "object", "title": "Jobs", "default": {} }
        },
        "type": "object",
        "required": [
          "wrapped_run_id",
          "app_user_id",
          "sec_user_id",
          "run_status",
          "wrapped_link",
          "wrapped_status_endpoint"
        ],
        "title": "AdminTestRunStatusResponse"
      },
      "AdminUserRestartBatchItem": {
        "properties": {
          "app_user_id": { "type": "string", "title": "App User Id" },
          "result": {
            "anyOf": [
              { "$ref": "#/components/schemas/AdminUserRestartResponse" },
              { "type": "null" }
            ]
          },
          "error": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Error"
          }
        },
        "type": "object",
        "required": ["app_user_id"],
        "title": "AdminUserRestartBatchItem"
      },
      "AdminUserRestartBatchRequest": {
        "properties": {
          "limit": { "type": "integer", "title": "Limit", "default": 50 },
          "offset": { "type": "integer", "title": "Offset", "default": 0 },
          "include_admin_test": {
            "type": "boolean",
            "title": "Include Admin Test",
            "default": false
          },
          "watch_history_status": {
            "anyOf": [
              {
                "items": { "type": "string", "enum": ["unknown", "yes", "no"] },
                "type": "array"
              },
              { "type": "null" }
            ],
            "title": "Watch History Status"
          },
          "run_status": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "enum": ["pending", "ready", "failed", "no_run"]
                },
                "type": "array"
              },
              { "type": "null" }
            ],
            "title": "Run Status"
          },
          "stage_filter": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "enum": [
                    "verify_region",
                    "watch_history",
                    "analysis",
                    "email",
                    "ready",
                    "no_run"
                  ]
                },
                "type": "array"
              },
              { "type": "null" }
            ],
            "title": "Stage Filter"
          },
          "restart_stage": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "next",
                  "verify_region",
                  "watch_history",
                  "analysis",
                  "email"
                ]
              },
              { "type": "null" }
            ],
            "title": "Restart Stage",
            "default": "next"
          },
          "force_new_jobs": {
            "type": "boolean",
            "title": "Force New Jobs",
            "default": true
          },
          "reset_payload": {
            "type": "boolean",
            "title": "Reset Payload",
            "default": true
          },
          "dry_run": { "type": "boolean", "title": "Dry Run", "default": false }
        },
        "type": "object",
        "title": "AdminUserRestartBatchRequest"
      },
      "AdminUserRestartBatchResponse": {
        "properties": {
          "limit": { "type": "integer", "title": "Limit" },
          "offset": { "type": "integer", "title": "Offset" },
          "requested": { "type": "integer", "title": "Requested" },
          "processed": { "type": "integer", "title": "Processed" },
          "enqueued": { "type": "integer", "title": "Enqueued" },
          "skipped": { "type": "integer", "title": "Skipped" },
          "dry_run": { "type": "boolean", "title": "Dry Run" },
          "results": {
            "items": {
              "$ref": "#/components/schemas/AdminUserRestartBatchItem"
            },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": [
          "limit",
          "offset",
          "requested",
          "processed",
          "enqueued",
          "skipped",
          "dry_run",
          "results"
        ],
        "title": "AdminUserRestartBatchResponse"
      },
      "AdminUserRestartRequest": {
        "properties": {
          "stage": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Stage"
          },
          "wrapped_run_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Wrapped Run Id"
          },
          "force_new_jobs": {
            "type": "boolean",
            "title": "Force New Jobs",
            "default": true
          },
          "reset_payload": {
            "type": "boolean",
            "title": "Reset Payload",
            "default": true
          }
        },
        "type": "object",
        "title": "AdminUserRestartRequest"
      },
      "AdminUserRestartResponse": {
        "properties": {
          "app_user_id": { "type": "string", "title": "App User Id" },
          "wrapped_run_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Wrapped Run Id"
          },
          "selected_stage": { "type": "string", "title": "Selected Stage" },
          "enqueued_task": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Enqueued Task"
          },
          "job_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Job Id"
          },
          "status": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Status"
          },
          "idempotency_key": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Idempotency Key"
          },
          "skipped_reason": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Skipped Reason"
          }
        },
        "type": "object",
        "required": ["app_user_id", "selected_stage"],
        "title": "AdminUserRestartResponse"
      },
      "AdminUserStageBatchRequest": {
        "properties": {
          "limit": { "type": "integer", "title": "Limit", "default": 50 },
          "offset": { "type": "integer", "title": "Offset", "default": 0 },
          "include_admin_test": {
            "type": "boolean",
            "title": "Include Admin Test",
            "default": false
          },
          "watch_history_status": {
            "anyOf": [
              {
                "items": { "type": "string", "enum": ["unknown", "yes", "no"] },
                "type": "array"
              },
              { "type": "null" }
            ],
            "title": "Watch History Status"
          },
          "run_status": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "enum": ["pending", "ready", "failed", "no_run"]
                },
                "type": "array"
              },
              { "type": "null" }
            ],
            "title": "Run Status"
          },
          "stage": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "enum": [
                    "verify_region",
                    "watch_history",
                    "analysis",
                    "email",
                    "ready",
                    "no_run"
                  ]
                },
                "type": "array"
              },
              { "type": "null" }
            ],
            "title": "Stage"
          }
        },
        "type": "object",
        "title": "AdminUserStageBatchRequest"
      },
      "AdminUserStageBatchResponse": {
        "properties": {
          "limit": { "type": "integer", "title": "Limit" },
          "offset": { "type": "integer", "title": "Offset" },
          "requested": { "type": "integer", "title": "Requested" },
          "returned": { "type": "integer", "title": "Returned" },
          "items": {
            "items": { "$ref": "#/components/schemas/AdminUserStageResponse" },
            "type": "array",
            "title": "Items"
          }
        },
        "type": "object",
        "required": ["limit", "offset", "requested", "returned", "items"],
        "title": "AdminUserStageBatchResponse"
      },
      "AdminUserStageResponse": {
        "properties": {
          "app_user_id": { "type": "string", "title": "App User Id" },
          "sec_user_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Sec User Id"
          },
          "wrapped_run_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Wrapped Run Id"
          },
          "run_status": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Run Status"
          },
          "stage": { "type": "string", "title": "Stage" },
          "next_stage": { "type": "string", "title": "Next Stage" },
          "verify": { "$ref": "#/components/schemas/AdminUserStageVerify" },
          "data_jobs": {
            "type": "object",
            "title": "Data Jobs",
            "default": {}
          },
          "watch_history_progress": {
            "anyOf": [{ "type": "object" }, { "type": "null" }],
            "title": "Watch History Progress"
          },
          "jobs": { "type": "object", "title": "Jobs", "default": {} }
        },
        "type": "object",
        "required": ["app_user_id", "stage", "next_stage", "verify"],
        "title": "AdminUserStageResponse"
      },
      "AdminUserStageVerify": {
        "properties": {
          "is_watch_history_available": {
            "type": "string",
            "enum": ["unknown", "yes", "no"],
            "title": "Is Watch History Available"
          },
          "job_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Job Id"
          },
          "job_status": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Job Status"
          },
          "is_stuck": {
            "anyOf": [{ "type": "boolean" }, { "type": "null" }],
            "title": "Is Stuck"
          },
          "stuck_reason": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Stuck Reason"
          },
          "locked_for_seconds": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Locked For Seconds"
          },
          "locked_by": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Locked By"
          },
          "locked_at": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Locked At"
          },
          "updated_at": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Updated At"
          },
          "result": {
            "anyOf": [{ "type": "object" }, { "type": "null" }],
            "title": "Result"
          }
        },
        "type": "object",
        "required": ["is_watch_history_available"],
        "title": "AdminUserStageVerify"
      },
      "AdminVerifyRegionBatchItem": {
        "properties": {
          "app_user_id": { "type": "string", "title": "App User Id" },
          "sec_user_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Sec User Id"
          },
          "job_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Job Id"
          },
          "status": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Status"
          },
          "idempotency_key": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Idempotency Key"
          },
          "error": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Error"
          }
        },
        "type": "object",
        "required": ["app_user_id"],
        "title": "AdminVerifyRegionBatchItem"
      },
      "AdminVerifyRegionBatchRequest": {
        "properties": {
          "include_unknown": {
            "type": "boolean",
            "title": "Include Unknown",
            "default": false
          },
          "auto_enqueue": {
            "type": "boolean",
            "title": "Auto Enqueue",
            "default": false
          },
          "force_new": {
            "type": "boolean",
            "title": "Force New",
            "default": false
          }
        },
        "type": "object",
        "title": "AdminVerifyRegionBatchRequest"
      },
      "AdminVerifyRegionBatchResponse": {
        "properties": {
          "batch_id": { "type": "string", "title": "Batch Id" },
          "matched": { "type": "integer", "title": "Matched" },
          "processed": { "type": "integer", "title": "Processed" },
          "enqueued": { "type": "integer", "title": "Enqueued" },
          "results": {
            "items": {
              "$ref": "#/components/schemas/AdminVerifyRegionBatchItem"
            },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": ["batch_id", "matched", "processed", "enqueued", "results"],
        "title": "AdminVerifyRegionBatchResponse"
      },
      "AdminVerifyRegionBatchStatusItem": {
        "properties": {
          "app_user_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "App User Id"
          },
          "sec_user_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Sec User Id"
          },
          "job_id": { "type": "string", "title": "Job Id" },
          "job_status": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Job Status"
          },
          "verify_status": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Verify Status"
          },
          "attempts": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Attempts"
          },
          "last_error": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Last Error"
          },
          "checked_at": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Checked At"
          },
          "error": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Error"
          }
        },
        "type": "object",
        "required": ["job_id"],
        "title": "AdminVerifyRegionBatchStatusItem"
      },
      "AdminVerifyRegionBatchStatusResponse": {
        "properties": {
          "batch_id": { "type": "string", "title": "Batch Id" },
          "created_at": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Created At"
          },
          "total": { "type": "integer", "title": "Total" },
          "completed": { "type": "integer", "title": "Completed" },
          "pending": { "type": "integer", "title": "Pending" },
          "yes": { "type": "integer", "title": "Yes" },
          "no": { "type": "integer", "title": "No" },
          "unknown": { "type": "integer", "title": "Unknown" },
          "error": { "type": "integer", "title": "Error" },
          "results": {
            "items": {
              "$ref": "#/components/schemas/AdminVerifyRegionBatchStatusItem"
            },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": [
          "batch_id",
          "total",
          "completed",
          "pending",
          "yes",
          "no",
          "unknown",
          "error",
          "results"
        ],
        "title": "AdminVerifyRegionBatchStatusResponse"
      },
      "AdminVerifyRegionEnqueueResponse": {
        "properties": {
          "app_user_id": { "type": "string", "title": "App User Id" },
          "task_name": { "type": "string", "title": "Task Name" },
          "job_id": { "type": "string", "title": "Job Id" },
          "status": { "type": "string", "title": "Status" },
          "idempotency_key": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Idempotency Key"
          }
        },
        "type": "object",
        "required": ["app_user_id", "task_name", "job_id", "status"],
        "title": "AdminVerifyRegionEnqueueResponse"
      },
      "AdminWrappedRetryRequest": {
        "properties": {
          "include_watch_history": {
            "type": "boolean",
            "title": "Include Watch History",
            "default": true
          },
          "include_analysis": {
            "type": "boolean",
            "title": "Include Analysis",
            "default": true
          },
          "force_new_jobs": {
            "type": "boolean",
            "title": "Force New Jobs",
            "default": true
          },
          "reset_payload": {
            "type": "boolean",
            "title": "Reset Payload",
            "default": true
          }
        },
        "type": "object",
        "title": "AdminWrappedRetryRequest",
        "description": "Admin-only: restart an existing wrapped run for a real user."
      },
      "Body_upload_image_upload_post": {
        "properties": {
          "file": { "type": "string", "format": "binary", "title": "File" }
        },
        "type": "object",
        "required": ["file"],
        "title": "Body_upload_image_upload_post"
      },
      "CodeResponse": {
        "properties": {
          "authorization_code": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Authorization Code"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "ready", "expired"],
            "title": "Status",
            "default": "pending"
          },
          "expires_at": {
            "anyOf": [
              { "type": "string", "format": "date-time" },
              { "type": "null" }
            ],
            "title": "Expires At"
          },
          "queue_position": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Queue Position"
          }
        },
        "type": "object",
        "title": "CodeResponse"
      },
      "DataJobRef": {
        "properties": {
          "id": { "type": "string", "title": "Id" },
          "status": {
            "type": "string",
            "enum": ["pending", "running", "succeeded", "failed", "unknown"],
            "title": "Status",
            "default": "pending"
          }
        },
        "type": "object",
        "required": ["id"],
        "title": "DataJobRef"
      },
      "ErrorResponse": {
        "properties": {
          "error": { "type": "string", "title": "Error" },
          "message": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Message"
          }
        },
        "type": "object",
        "required": ["error"],
        "title": "ErrorResponse"
      },
      "FinalizeRequest": {
        "properties": {
          "archive_job_id": { "type": "string", "title": "Archive Job Id" },
          "authorization_code": {
            "type": "string",
            "title": "Authorization Code"
          },
          "time_zone": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Time Zone"
          },
          "referral_code": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Referral Code"
          }
        },
        "type": "object",
        "required": ["archive_job_id", "authorization_code"],
        "title": "FinalizeRequest"
      },
      "FinalizeResponse": {
        "properties": {
          "archive_user_id": { "type": "string", "title": "Archive User Id" },
          "sec_user_id": { "type": "string", "title": "Sec User Id" },
          "anchor_token": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Anchor Token"
          },
          "app_user_id": { "type": "string", "title": "App User Id" },
          "token": { "type": "string", "title": "Token" },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "title": "Expires At"
          },
          "platform_username": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Platform Username"
          }
        },
        "type": "object",
        "required": [
          "archive_user_id",
          "sec_user_id",
          "app_user_id",
          "token",
          "expires_at"
        ],
        "title": "FinalizeResponse"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": { "$ref": "#/components/schemas/ValidationError" },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "LinkStartResponse": {
        "properties": {
          "archive_job_id": { "type": "string", "title": "Archive Job Id" },
          "expires_at": {
            "anyOf": [
              { "type": "string", "format": "date-time" },
              { "type": "null" }
            ],
            "title": "Expires At"
          },
          "queue_position": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Queue Position"
          },
          "failed_count": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Failed Count"
          }
        },
        "type": "object",
        "required": ["archive_job_id"],
        "title": "LinkStartResponse"
      },
      "RedirectClickRequest": {
        "properties": {
          "archive_job_id": { "type": "string", "title": "Archive Job Id" }
        },
        "type": "object",
        "required": ["archive_job_id"],
        "title": "RedirectClickRequest"
      },
      "RedirectResponse": {
        "properties": {
          "redirect_url": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Redirect Url"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "ready",
              "finalizing",
              "completed",
              "expired",
              "reauth_needed",
              "unsupported_region"
            ],
            "title": "Status",
            "default": "pending"
          },
          "queue_status": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Queue Status"
          },
          "queue_position": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Queue Position"
          },
          "queue_request_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Queue Request Id"
          },
          "message": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Message"
          },
          "app_user_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "App User Id"
          },
          "token": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Token"
          },
          "expires_at": {
            "anyOf": [
              { "type": "string", "format": "date-time" },
              { "type": "null" }
            ],
            "title": "Expires At"
          },
          "platform_username": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Platform Username"
          }
        },
        "type": "object",
        "title": "RedirectResponse"
      },
      "ReferralImpressionRequest": {
        "properties": { "code": { "type": "string", "title": "Code" } },
        "type": "object",
        "required": ["code"],
        "title": "ReferralImpressionRequest"
      },
      "ReferralRequest": {
        "properties": {
          "app_user_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "App User Id"
          },
          "email": {
            "anyOf": [
              { "type": "string", "format": "email" },
              { "type": "null" }
            ],
            "title": "Email"
          }
        },
        "type": "object",
        "title": "ReferralRequest"
      },
      "ReferralResponse": {
        "properties": {
          "code": { "type": "string", "title": "Code" },
          "referral_url": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Referral Url"
          }
        },
        "type": "object",
        "required": ["code"],
        "title": "ReferralResponse"
      },
      "RegisterEmailRequest": {
        "properties": {
          "email": { "type": "string", "format": "email", "title": "Email" },
          "referral_code": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Referral Code"
          }
        },
        "type": "object",
        "required": ["email"],
        "title": "RegisterEmailRequest"
      },
      "ScrollTime": {
        "properties": {
          "title": { "type": "string", "title": "Title" },
          "rate": { "type": "string", "title": "Rate" },
          "between_time": { "type": "string", "title": "Between Time" }
        },
        "type": "object",
        "required": ["title", "rate", "between_time"],
        "title": "ScrollTime"
      },
      "TopicItem": {
        "properties": {
          "topic": { "type": "string", "title": "Topic" },
          "pic_url": { "type": "string", "title": "Pic Url" }
        },
        "type": "object",
        "required": ["topic", "pic_url"],
        "title": "TopicItem"
      },
      "UnsubscribeRequest": {
        "properties": {
          "app_user_id": { "type": "string", "title": "App User Id" }
        },
        "type": "object",
        "required": ["app_user_id"],
        "title": "UnsubscribeRequest"
      },
      "UnsubscribeResponse": {
        "properties": {
          "success": { "type": "boolean", "title": "Success" },
          "message": { "type": "string", "title": "Message" }
        },
        "type": "object",
        "required": ["success", "message"],
        "title": "UnsubscribeResponse"
      },
      "UploadResponse": {
        "properties": {
          "url": { "type": "string", "title": "Url" },
          "key": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Key"
          }
        },
        "type": "object",
        "required": ["url"],
        "title": "UploadResponse"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": { "anyOf": [{ "type": "string" }, { "type": "integer" }] },
            "type": "array",
            "title": "Location"
          },
          "msg": { "type": "string", "title": "Message" },
          "type": { "type": "string", "title": "Error Type" }
        },
        "type": "object",
        "required": ["loc", "msg", "type"],
        "title": "ValidationError"
      },
      "VerifyRegionResponse": {
        "properties": {
          "is_watch_history_available": {
            "type": "string",
            "enum": ["unknown", "yes", "no"],
            "title": "Is Watch History Available"
          },
          "attempts": { "type": "integer", "title": "Attempts" },
          "last_error": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Last Error"
          }
        },
        "type": "object",
        "required": ["is_watch_history_available", "attempts"],
        "title": "VerifyRegionResponse"
      },
      "WaitlistRequest": {
        "properties": {
          "email": { "type": "string", "format": "email", "title": "Email" }
        },
        "type": "object",
        "required": ["email"],
        "title": "WaitlistRequest"
      },
      "WeeklyReportResponse": {
        "properties": {
          "id": { "type": "integer", "title": "Id" },
          "app_user_id": { "type": "string", "title": "App User Id" },
          "email_content": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Email Content"
          },
          "period_start": {
            "anyOf": [
              { "type": "string", "format": "date-time" },
              { "type": "null" }
            ],
            "title": "Period Start"
          },
          "period_end": {
            "anyOf": [
              { "type": "string", "format": "date-time" },
              { "type": "null" }
            ],
            "title": "Period End"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "send_status": {
            "type": "string",
            "enum": ["pending", "sent", "failed"],
            "title": "Send Status"
          },
          "feeding_state": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Feeding State"
          },
          "trend_name": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Trend Name"
          },
          "trend_type": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Trend Type"
          },
          "discovery_rank": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Discovery Rank"
          },
          "total_discoverers": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Total Discoverers"
          },
          "origin_niche_text": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Origin Niche Text"
          },
          "spread_end_text": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Spread End Text"
          },
          "reach_start": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Reach Start"
          },
          "reach_end": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Reach End"
          },
          "current_reach": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Current Reach"
          },
          "total_videos": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Total Videos"
          },
          "total_time": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Total Time"
          },
          "pre_total_time": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Pre Total Time"
          },
          "miles_scrolled": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Miles Scrolled"
          },
          "topics": {
            "anyOf": [
              {
                "items": { "$ref": "#/components/schemas/TopicItem" },
                "type": "array"
              },
              { "type": "null" }
            ],
            "title": "Topics"
          },
          "timezone": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Timezone"
          },
          "rabbit_hole_datetime": {
            "anyOf": [
              { "type": "string", "format": "date-time" },
              { "type": "null" }
            ],
            "title": "Rabbit Hole Datetime"
          },
          "rabbit_hole_date": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Rabbit Hole Date"
          },
          "rabbit_hole_time": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Rabbit Hole Time"
          },
          "rabbit_hole_count": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Rabbit Hole Count"
          },
          "rabbit_hole_category": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Rabbit Hole Category"
          },
          "nudge_text": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Nudge Text"
          }
        },
        "type": "object",
        "required": [
          "id",
          "app_user_id",
          "created_at",
          "updated_at",
          "send_status"
        ],
        "title": "WeeklyReportResponse"
      },
      "WrappedPayload": {
        "properties": {
          "total_hours": { "type": "number", "title": "Total Hours" },
          "total_videos": { "type": "integer", "title": "Total Videos" },
          "night_pct": { "type": "number", "title": "Night Pct" },
          "peak_hour": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Peak Hour"
          },
          "top_music": { "type": "object", "title": "Top Music" },
          "top_creators": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Top Creators"
          },
          "cat_name": { "type": "string", "title": "Cat Name" },
          "analogy_line": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Analogy Line"
          },
          "scroll_time": { "$ref": "#/components/schemas/ScrollTime" },
          "personality_type": { "type": "string", "title": "Personality Type" },
          "personality_explanation": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Personality Explanation"
          },
          "niche_journey": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Niche Journey"
          },
          "top_niches": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Top Niches"
          },
          "top_niche_percentile": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Top Niche Percentile"
          },
          "brain_rot_score": { "type": "integer", "title": "Brain Rot Score" },
          "brainrot_intensity": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Brainrot Intensity"
          },
          "brainrot_volume_hours": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Brainrot Volume Hours"
          },
          "brainrot_confidence": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Brainrot Confidence"
          },
          "brainrot_enriched_hours": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Brainrot Enriched Hours"
          },
          "brainrot_enriched_watch_pct": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Brainrot Enriched Watch Pct"
          },
          "brain_rot_explanation": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Brain Rot Explanation"
          },
          "keyword_2026": { "type": "string", "title": "Keyword 2026" },
          "thumb_roast": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Thumb Roast"
          },
          "platform_username": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Platform Username"
          },
          "email": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Email"
          },
          "source_spans": {
            "items": { "type": "object" },
            "type": "array",
            "title": "Source Spans",
            "default": []
          },
          "data_jobs": {
            "additionalProperties": {
              "$ref": "#/components/schemas/DataJobRef"
            },
            "type": "object",
            "title": "Data Jobs"
          },
          "accessory_set": { "$ref": "#/components/schemas/AccessorySet" }
        },
        "type": "object",
        "required": [
          "total_hours",
          "total_videos",
          "night_pct",
          "top_music",
          "top_creators",
          "cat_name",
          "scroll_time",
          "personality_type",
          "niche_journey",
          "top_niches",
          "brain_rot_score",
          "keyword_2026",
          "data_jobs",
          "accessory_set"
        ],
        "title": "WrappedPayload"
      },
      "WrappedStatusResponse": {
        "properties": {
          "status": {
            "type": "string",
            "enum": ["pending", "ready"],
            "title": "Status"
          },
          "wrapped_run_id": { "type": "string", "title": "Wrapped Run Id" },
          "wrapped": {
            "anyOf": [
              { "$ref": "#/components/schemas/WrappedPayload" },
              { "type": "null" }
            ]
          },
          "watch_history_progress": {
            "anyOf": [{ "type": "object" }, { "type": "null" }],
            "title": "Watch History Progress"
          },
          "queue_position": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Queue Position"
          },
          "queue_eta_seconds": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Queue Eta Seconds"
          },
          "queue_status": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Queue Status"
          }
        },
        "type": "object",
        "required": ["status", "wrapped_run_id"],
        "title": "WrappedStatusResponse"
      }
    }
  }
}
